!function(a,b){"function"==typeof define&&define.amd?define([],b):"object"==typeof exports?module.exports=b():a.Handlebars=a.Handlebars||b()}(this,function(){var a=function(){"use strict";function a(a){this.string=a}return a.prototype.toString=function(){return""+this.string},a}(),b=function(a){"use strict";function b(a){return i[a]}function c(a){for(var b=1;b<arguments.length;b++)for(var c in arguments[b])Object.prototype.hasOwnProperty.call(arguments[b],c)&&(a[c]=arguments[b][c]);return a}function d(a){return a instanceof h?a.toString():null==a?"":a?(a=""+a,k.test(a)?a.replace(j,b):a):a+""}function e(a){return!a&&0!==a||!(!n(a)||0!==a.length)}function f(a,b){return(a?a+".":"")+b}var g={},h=a,i={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},j=/[&<>"'`]/g,k=/[&<>"'`]/;g.extend=c;var l=Object.prototype.toString;g.toString=l;var m=function(a){return"function"==typeof a};m(/x/)&&(m=function(a){return"function"==typeof a&&"[object Function]"===l.call(a)});var m;g.isFunction=m;var n=Array.isArray||function(a){return!(!a||"object"!=typeof a)&&"[object Array]"===l.call(a)};return g.isArray=n,g.escapeExpression=d,g.isEmpty=e,g.appendContextPath=f,g}(a),c=function(){"use strict";function a(a,c){var d;c&&c.firstLine&&(d=c.firstLine,a+=" - "+d+":"+c.firstColumn);for(var e=Error.prototype.constructor.call(this,a),f=0;f<b.length;f++)this[b[f]]=e[b[f]];d&&(this.lineNumber=d,this.column=c.firstColumn)}var b=["description","fileName","lineNumber","message","name","number","stack"];return a.prototype=new Error,a}(),d=function(a,b){"use strict";function c(a,b){this.helpers=a||{},this.partials=b||{},d(this)}function d(a){a.registerHelper("helperMissing",function(){if(1!==arguments.length)throw new g("Missing helper: '"+arguments[arguments.length-1].name+"'")}),a.registerHelper("blockHelperMissing",function(b,c){var d=c.inverse,e=c.fn;if(!0===b)return e(this);if(!1===b||null==b)return d(this);if(i(b))return b.length>0?(c.ids&&(c.ids=[c.name]),a.helpers.each(b,c)):d(this);if(c.data&&c.ids){var g=o(c.data);g.contextPath=f.appendContextPath(c.data.contextPath,c.name),c={data:g}}return e(b,c)}),a.registerHelper("each",function(a,b){if(!b)throw new g("Must pass iterator to #each");var c,d,e=b.fn,h=b.inverse,k=0,l="";if(b.data&&b.ids&&(d=f.appendContextPath(b.data.contextPath,b.ids[0])+"."),j(a)&&(a=a.call(this)),b.data&&(c=o(b.data)),a&&"object"==typeof a)if(i(a))for(var m=a.length;m>k;k++)c&&(c.index=k,c.first=0===k,c.last=k===a.length-1,d&&(c.contextPath=d+k)),l+=e(a[k],{data:c});else for(var n in a)a.hasOwnProperty(n)&&(c&&(c.key=n,c.index=k,c.first=0===k,d&&(c.contextPath=d+n)),l+=e(a[n],{data:c}),k++);return 0===k&&(l=h(this)),l}),a.registerHelper("if",function(a,b){return j(a)&&(a=a.call(this)),!b.hash.includeZero&&!a||f.isEmpty(a)?b.inverse(this):b.fn(this)}),a.registerHelper("unless",function(b,c){return a.helpers.if.call(this,b,{fn:c.inverse,inverse:c.fn,hash:c.hash})}),a.registerHelper("with",function(a,b){j(a)&&(a=a.call(this));var c=b.fn;if(f.isEmpty(a))return b.inverse(this);if(b.data&&b.ids){var d=o(b.data);d.contextPath=f.appendContextPath(b.data.contextPath,b.ids[0]),b={data:d}}return c(a,b)}),a.registerHelper("log",function(b,c){var d=c.data&&null!=c.data.level?parseInt(c.data.level,10):1;a.log(d,b)}),a.registerHelper("lookup",function(a,b){return a&&a[b]})}var e={},f=a,g=b;e.VERSION="2.0.0",e.COMPILER_REVISION=6;var h={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1"};e.REVISION_CHANGES=h;var i=f.isArray,j=f.isFunction,k=f.toString,l="[object Object]";e.HandlebarsEnvironment=c,c.prototype={constructor:c,logger:m,log:n,registerHelper:function(a,b){if(k.call(a)===l){if(b)throw new g("Arg not supported with multiple helpers");f.extend(this.helpers,a)}else this.helpers[a]=b},unregisterHelper:function(a){delete this.helpers[a]},registerPartial:function(a,b){k.call(a)===l?f.extend(this.partials,a):this.partials[a]=b},unregisterPartial:function(a){delete this.partials[a]}};var m={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(a,b){if(m.level<=a){var c=m.methodMap[a];"undefined"!=typeof console&&console[c]}}};e.logger=m;var n=m.log;e.log=n;var o=function(a){var b=f.extend({},a);return b._parent=a,b};return e.createFrame=o,e}(b,c),e=function(a,b,c){"use strict";function d(a){var b=a&&a[0]||1,c=m;if(b!==c){if(c>b){var d=n[c],e=n[b];throw new l("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+d+") or downgrade your runtime to an older version ("+e+").")}throw new l("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+a[1]+").")}}function e(a,b){if(!b)throw new l("No environment passed to template");if(!a||!a.main)throw new l("Unknown template object: "+typeof a);b.VM.checkRevision(a.compiler);var c=function(c,d,e,f,g,h,i,j,m){g&&(f=k.extend({},f,g));var n=b.VM.invokePartial.call(this,c,e,f,h,i,j,m);if(null==n&&b.compile){var o={helpers:h,partials:i,data:j,depths:m};i[e]=b.compile(c,{data:void 0!==j,compat:a.compat},b),n=i[e](f,o)}if(null!=n){if(d){for(var p=n.split("\n"),q=0,r=p.length;r>q&&(p[q]||q+1!==r);q++)p[q]=d+p[q];n=p.join("\n")}return n}throw new l("The partial "+e+" could not be compiled when running in runtime-only mode")},d={lookup:function(a,b){for(var c=a.length,d=0;c>d;d++)if(a[d]&&null!=a[d][b])return a[d][b]},lambda:function(a,b){return"function"==typeof a?a.call(b):a},escapeExpression:k.escapeExpression,invokePartial:c,fn:function(b){return a[b]},programs:[],program:function(a,b,c){var d=this.programs[a],e=this.fn(a);return b||c?d=f(this,a,e,b,c):d||(d=this.programs[a]=f(this,a,e)),d},data:function(a,b){for(;a&&b--;)a=a._parent;return a},merge:function(a,b){var c=a||b;return a&&b&&a!==b&&(c=k.extend({},b,a)),c},noop:b.VM.noop,compilerInfo:a.compiler},e=function(b,c){c=c||{};var f=c.data;e._setup(c),!c.partial&&a.useData&&(f=i(b,f));var g;return a.useDepths&&(g=c.depths?[b].concat(c.depths):[b]),a.main.call(d,b,d.helpers,d.partials,f,g)};return e.isTop=!0,e._setup=function(c){c.partial?(d.helpers=c.helpers,d.partials=c.partials):(d.helpers=d.merge(c.helpers,b.helpers),a.usePartial&&(d.partials=d.merge(c.partials,b.partials)))},e._child=function(b,c,e){if(a.useDepths&&!e)throw new l("must pass parent depths");return f(d,b,a[b],c,e)},e}function f(a,b,c,d,e){var f=function(b,f){return f=f||{},c.call(a,b,a.helpers,a.partials,f.data||d,e&&[b].concat(e))};return f.program=b,f.depth=e?e.length:0,f}function g(a,b,c,d,e,f,g){var h={partial:!0,helpers:d,partials:e,data:f,depths:g};if(void 0===a)throw new l("The partial "+b+" could not be found");return a instanceof Function?a(c,h):void 0}function h(){return""}function i(a,b){return b&&"root"in b||(b=b?o(b):{},b.root=a),b}var j={},k=a,l=b,m=c.COMPILER_REVISION,n=c.REVISION_CHANGES,o=c.createFrame;return j.checkRevision=d,j.template=e,j.program=f,j.invokePartial=g,j.noop=h,j}(b,c,d);return function(a,b,c,d,e){"use strict";var f=a,g=b,h=c,i=d,j=e,k=function(){var a=new f.HandlebarsEnvironment;return i.extend(a,f),a.SafeString=g,a.Exception=h,a.Utils=i,a.escapeExpression=i.escapeExpression,a.VM=j,a.template=function(b){return j.template(b,a)},a},l=k();return l.create=k,l.default=l,l}(d,a,c,b,e)}),function(){atmire=window.atmire||{},atmire.Handlebars=atmire.Handlebars||Handlebars}(),function(a,b){"object"==typeof exports?module.exports=b():"function"==typeof define&&define.amd?define(b):a.Spinner=b()}(this,function(){"use strict";function a(a,b){var c,d=document.createElement(a||"div");for(c in b)d[c]=b[c];return d}function b(a){for(var b=1,c=arguments.length;b<c;b++)a.appendChild(arguments[b]);return a}function c(a,b,c,d){var e=["opacity",b,~~(100*a),c,d].join("-"),f=.01+c/d*100,g=Math.max(1-(1-a)/b*(100-f),a),h=k.substring(0,k.indexOf("Animation")).toLowerCase(),i=h&&"-"+h+"-"||"";return m[e]||(n.insertRule("@"+i+"keyframes "+e+"{0%{opacity:"+g+"}"+f+"%{opacity:"+a+"}"+(f+.01)+"%{opacity:1}"+(f+b)%100+"%{opacity:"+a+"}100%{opacity:"+g+"}}",n.cssRules.length),m[e]=1),e}function d(a,b){var c,d,e=a.style;if(void 0!==e[b])return b;for(b=b.charAt(0).toUpperCase()+b.slice(1),d=0;d<l.length;d++)if(c=l[d]+b,void 0!==e[c])return c}function e(a,b){for(var c in b)a.style[d(a,c)||c]=b[c];return a}function f(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)void 0===a[d]&&(a[d]=c[d])}return a}function g(a){for(var b={x:a.offsetLeft,y:a.offsetTop};a=a.offsetParent;)b.x+=a.offsetLeft,b.y+=a.offsetTop;return b}function h(a,b){return"string"==typeof a?a:a[b%a.length]}function i(a){if(void 0===this)return new i(a);this.opts=f(a||{},i.defaults,o)}function j(){function c(b,c){return a("<"+b+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',c)}n.addRule(".spin-vml","behavior:url(#default#VML)"),i.prototype.lines=function(a,d){function f(){return e(c("group",{coordsize:k+" "+k,coordorigin:-j+" "+-j}),{width:k,height:k})}function g(a,g,i){b(m,b(e(f(),{rotation:360/d.lines*a+"deg",left:~~g}),b(e(c("roundrect",{arcsize:d.corners}),{width:j,height:d.width,left:d.radius,top:-d.width>>1,filter:i}),c("fill",{color:h(d.color,a),opacity:d.opacity}),c("stroke",{opacity:0}))))}var i,j=d.length+d.width,k=2*j,l=2*-(d.width+d.length)+"px",m=e(f(),{position:"absolute",top:l,left:l});if(d.shadow)for(i=1;i<=d.lines;i++)g(i,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(i=1;i<=d.lines;i++)g(i);return b(a,m)},i.prototype.opacity=function(a,b,c,d){var e=a.firstChild;d=d.shadow&&d.lines||0,e&&b+d<e.childNodes.length&&(e=e.childNodes[b+d],e=e&&e.firstChild,(e=e&&e.firstChild)&&(e.opacity=c))}}var k,l=["webkit","Moz","ms","O"],m={},n=function(){var c=a("style",{type:"text/css"});return b(document.getElementsByTagName("head")[0],c),c.sheet||c.styleSheet}(),o={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"auto",left:"auto",position:"relative"};i.defaults={},f(i.prototype,{spin:function(b){this.stop();var c,d,f=this,h=f.opts,i=f.el=e(a(0,{className:h.className}),{position:h.position,width:0,zIndex:h.zIndex}),j=h.radius+h.length+h.width;if(b&&(b.insertBefore(i,b.firstChild||null),d=g(b),c=g(i),e(i,{left:("auto"==h.left?d.x-c.x+(b.offsetWidth>>1):parseInt(h.left,10)+j)+"px",top:("auto"==h.top?d.y-c.y+(b.offsetHeight>>1):parseInt(h.top,10)+j)+"px"})),i.setAttribute("role","progressbar"),f.lines(i,f.opts),!k){var l,m=0,n=(h.lines-1)*(1-h.direction)/2,o=h.fps,p=o/h.speed,q=(1-h.opacity)/(p*h.trail/100),r=p/h.lines;!function a(){m++;for(var b=0;b<h.lines;b++)l=Math.max(1-(m+(h.lines-b)*r)%p*q,h.opacity),f.opacity(i,b*h.direction+n,l,h);f.timeout=f.el&&setTimeout(a,~~(1e3/o))}()}return f},stop:function(){var a=this.el;return a&&(clearTimeout(this.timeout),a.parentNode&&a.parentNode.removeChild(a),this.el=void 0),this},lines:function(d,f){function g(b,c){return e(a(),{position:"absolute",width:f.length+f.width+"px",height:f.width+"px",background:b,boxShadow:c,transformOrigin:"left",transform:"rotate("+~~(360/f.lines*j+f.rotate)+"deg) translate("+f.radius+"px,0)",borderRadius:(f.corners*f.width>>1)+"px"})}for(var i,j=0,l=(f.lines-1)*(1-f.direction)/2;j<f.lines;j++)i=e(a(),{position:"absolute",top:1+~(f.width/2)+"px",transform:f.hwaccel?"translate3d(0,0,0)":"",opacity:f.opacity,animation:k&&c(f.opacity,f.trail,l+j*f.direction,f.lines)+" "+1/f.speed+"s linear infinite"}),f.shadow&&b(i,e(g("#000","0 0 4px #000"),{top:"2px"})),b(d,b(i,g(h(f.color,j),"0 0 1px rgba(0,0,0,.1)")));return d},opacity:function(a,b,c){b<a.childNodes.length&&(a.childNodes[b].style.opacity=c)}});var p=e(a("group"),{behavior:"url(#default#VML)"});return!d(p,"transform")&&p.adj?j():k=d(p,"animation"),i}),function(a){if("object"==typeof exports)a(require("jquery"),require("spin"));else if("function"==typeof define&&define.amd)define(["jquery","spin"],a);else{if(!window.Spinner)throw new Error("Spin.js not present");a(window.jQuery,window.Spinner)}}(function(a,b){a.fn.spin=function(c,d){return this.each(function(){var e=a(this),f=e.data();f.spinner&&(f.spinner.stop(),delete f.spinner),!1!==c&&(c=a.extend({color:d||e.css("color")},a.fn.spin.presets[c]||c),f.spinner=new b(c).spin(this))})},a.fn.spin.presets={tiny:{lines:8,length:2,width:2,radius:3},small:{lines:8,length:4,width:3,radius:5},large:{lines:10,length:8,width:4,radius:8}}}),function(){function a(a){this._value=a}function b(a,b,c,d){var e,f,g=Math.pow(10,b);return f=(c(a*g)/g).toFixed(b),d&&(e=new RegExp("0{1,"+d+"}$"),f=f.replace(e,"")),f}function c(a,b,c){return b.indexOf("$")>-1?e(a,b,c):b.indexOf("%")>-1?f(a,b,c):b.indexOf(":")>-1?g(a,b):i(a._value,b,c)}function d(a,b){var c,d,e,f,g,i=b,j=["KB","MB","GB","TB","PB","EB","ZB","YB"],k=!1;if(b.indexOf(":")>-1)a._value=h(b);else if(b===p)a._value=0;else{for("."!==n[o].delimiters.decimal&&(b=b.replace(/\./g,"").replace(n[o].delimiters.decimal,".")),c=new RegExp("[^a-zA-Z]"+n[o].abbreviations.thousand+"(?:\\)|(\\"+n[o].currency.symbol+")?(?:\\))?)?$"),d=new RegExp("[^a-zA-Z]"+n[o].abbreviations.million+"(?:\\)|(\\"+n[o].currency.symbol+")?(?:\\))?)?$"),e=new RegExp("[^a-zA-Z]"+n[o].abbreviations.billion+"(?:\\)|(\\"+n[o].currency.symbol+")?(?:\\))?)?$"),f=new RegExp("[^a-zA-Z]"+n[o].abbreviations.trillion+"(?:\\)|(\\"+n[o].currency.symbol+")?(?:\\))?)?$"),g=0;g<=j.length&&!(k=b.indexOf(j[g])>-1&&Math.pow(1024,g+1));g++);a._value=(k||1)*(i.match(c)?Math.pow(10,3):1)*(i.match(d)?Math.pow(10,6):1)*(i.match(e)?Math.pow(10,9):1)*(i.match(f)?Math.pow(10,12):1)*(b.indexOf("%")>-1?.01:1)*((b.split("-").length+Math.min(b.split("(").length-1,b.split(")").length-1))%2?1:-1)*Number(b.replace(/[^0-9\.]+/g,"")),a._value=k?Math.ceil(a._value):a._value}return a._value}function e(a,b,c){var d,e,f=b.indexOf("$"),g=b.indexOf("("),h=b.indexOf("-"),j="";return b.indexOf(" $")>-1?(j=" ",b=b.replace(" $","")):b.indexOf("$ ")>-1?(j=" ",b=b.replace("$ ","")):b=b.replace("$",""),e=i(a._value,b,c),1>=f?e.indexOf("(")>-1||e.indexOf("-")>-1?(e=e.split(""),d=1,(g>f||h>f)&&(d=0),e.splice(d,0,n[o].currency.symbol+j),e=e.join("")):e=n[o].currency.symbol+j+e:e.indexOf(")")>-1?(e=e.split(""),e.splice(-1,0,j+n[o].currency.symbol),e=e.join("")):e=e+j+n[o].currency.symbol,e}function f(a,b,c){var d,e="",f=100*a._value;return b.indexOf(" %")>-1?(e=" ",b=b.replace(" %","")):b=b.replace("%",""),d=i(f,b,c),d.indexOf(")")>-1?(d=d.split(""),d.splice(-1,0,e+"%"),d=d.join("")):d=d+e+"%",d}function g(a){var b=Math.floor(a._value/60/60),c=Math.floor((a._value-60*b*60)/60),d=Math.round(a._value-60*b*60-60*c);return b+":"+(10>c?"0"+c:c)+":"+(10>d?"0"+d:d)}function h(a){var b=a.split(":"),c=0;return 3===b.length?(c+=60*Number(b[0])*60,c+=60*Number(b[1]),c+=Number(b[2])):2===b.length&&(c+=60*Number(b[0]),c+=Number(b[1])),Number(c)}function i(a,c,d){var e,f,g,h,i,j,k=!1,l=!1,m=!1,q="",r=!1,s=!1,t=!1,u=!1,v=!1,w="",x="",y=Math.abs(a),z=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],A="",B=!1;if(0===a&&null!==p)return p;if(c.indexOf("(")>-1?(k=!0,c=c.slice(1,-1)):c.indexOf("+")>-1&&(l=!0,c=c.replace(/\+/g,"")),c.indexOf("a")>-1&&(r=c.indexOf("aK")>=0,s=c.indexOf("aM")>=0,t=c.indexOf("aB")>=0,u=c.indexOf("aT")>=0,v=r||s||t||u,c.indexOf(" a")>-1?(q=" ",c=c.replace(" a","")):c=c.replace("a",""),y>=Math.pow(10,12)&&!v||u?(q+=n[o].abbreviations.trillion,a/=Math.pow(10,12)):y<Math.pow(10,12)&&y>=Math.pow(10,9)&&!v||t?(q+=n[o].abbreviations.billion,a/=Math.pow(10,9)):y<Math.pow(10,9)&&y>=Math.pow(10,6)&&!v||s?(q+=n[o].abbreviations.million,a/=Math.pow(10,6)):(y<Math.pow(10,6)&&y>=Math.pow(10,3)&&!v||r)&&(q+=n[o].abbreviations.thousand,a/=Math.pow(10,3))),c.indexOf("b")>-1)for(c.indexOf(" b")>-1?(w=" ",c=c.replace(" b","")):c=c.replace("b",""),g=0;g<=z.length;g++)if(e=Math.pow(1024,g),f=Math.pow(1024,g+1),a>=e&&f>a){w+=z[g],e>0&&(a/=e);break}return c.indexOf("o")>-1&&(c.indexOf(" o")>-1?(x=" ",c=c.replace(" o","")):c=c.replace("o",""),x+=n[o].ordinal(a)),c.indexOf("[.]")>-1&&(m=!0,c=c.replace("[.]",".")),h=a.toString().split(".")[0],i=c.split(".")[1],j=c.indexOf(","),i?(i.indexOf("[")>-1?(i=i.replace("]",""),i=i.split("["),A=b(a,i[0].length+i[1].length,d,i[1].length)):A=b(a,i.length,d),h=A.split(".")[0],A=A.split(".")[1].length?n[o].delimiters.decimal+A.split(".")[1]:"",m&&0===Number(A.slice(1))&&(A="")):h=b(a,null,d),h.indexOf("-")>-1&&(h=h.slice(1),B=!0),j>-1&&(h=h.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+n[o].delimiters.thousands)),0===c.indexOf(".")&&(h=""),(k&&B?"(":"")+(!k&&B?"-":"")+(!B&&l?"+":"")+h+A+(x||"")+(q||"")+(w||"")+(k&&B?")":"")}function j(a,b){n[a]=b}function k(a){var b=a.toString().split(".");return b.length<2?1:Math.pow(10,b[1].length)}function l(){return Array.prototype.slice.call(arguments).reduce(function(a,b){var c=k(a),d=k(b);return c>d?c:d},-1/0)}var m,n={},o="en",p=null,q="0,0",r="undefined"!=typeof module&&module.exports;m=function(b){return m.isNumeral(b)?b=b.value():0===b||void 0===b?b=0:Number(b)||(b=m.fn.unformat(b)),new a(Number(b))},m.version="1.5.3",m.isNumeral=function(b){return b instanceof a},m.language=function(a,b){if(!a)return o;if(a&&!b){if(!n[a])throw new Error("Unknown language : "+a);o=a}return(b||!n[a])&&j(a,b),m},m.languageData=function(a){if(!a)return n[o];if(!n[a])throw new Error("Unknown language : "+a);return n[a]},m.language("en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(a){var b=a%10;return 1==~~(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th"},currency:{symbol:"$"}}),m.zeroFormat=function(a){p="string"==typeof a?a:null},m.defaultFormat=function(a){q="string"==typeof a?a:"0.0"},"function"!=typeof Array.prototype.reduce&&(Array.prototype.reduce=function(a,b){"use strict";if(null===this||void 0===this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof a)throw new TypeError(a+" is not a function");var c,d,e=this.length>>>0,f=!1;for(1<arguments.length&&(d=b,f=!0),c=0;e>c;++c)this.hasOwnProperty(c)&&(f?d=a(d,this[c],c,this):(d=this[c],f=!0));if(!f)throw new TypeError("Reduce of empty array with no initial value");return d}),m.fn=a.prototype={clone:function(){return m(this)},format:function(a,b){return c(this,a||q,void 0!==b?b:Math.round)},unformat:function(a){return"[object Number]"===Object.prototype.toString.call(a)?a:d(this,a||q)},value:function(){return this._value},valueOf:function(){return this._value},set:function(a){return this._value=Number(a),this},add:function(a){function b(a,b){return a+c*b}var c=l.call(null,this._value,a);return this._value=[this._value,a].reduce(b,0)/c,this},subtract:function(a){function b(a,b){return a-c*b}var c=l.call(null,this._value,a);return this._value=[a].reduce(b,this._value*c)/c,this},multiply:function(a){function b(a,b){var c=l(a,b);return a*c*b*c/(c*c)}return this._value=[this._value,a].reduce(b,1),this},divide:function(a){function b(a,b){var c=l(a,b);return a*c/(b*c)}return this._value=[this._value,a].reduce(b),this},difference:function(a){return Math.abs(m(this._value).subtract(a).value())}},r&&(module.exports=m),"undefined"==typeof ender&&(this.numeral=m),"function"==typeof define&&define.amd&&define([],function(){return m})}.call(this),function(a,b){function c(c){a.ajax({url:atmire.CUA.getContextPath()+"/aspects/ReportingSuite/templates/"+c+".handlebars",async:!1,dataType:"text",success:function(a){void 0===DSpace.templates&&(DSpace.templates={}),DSpace.templates[c]=b.compile(a)}})}function d(){b.registerHelper("I18n",function(b){return void 0!==a(document).data("i18n")&&b in a(document).data("i18n")?a(document).data("i18n")[b]:b}),b.registerHelper("addContextPath",function(a){return 0==a.indexOf("/")?atmire.CUA.getContextPath()+a:atmire.CUA.getContextPath()+"/"+a})}"undefined"==typeof atmire&&(atmire={}),"undefined"==typeof DSpace&&(DSpace={}),void 0===atmire.CUA&&(atmire.CUA={}),atmire.CUA.getContextPath=function(){return void 0===atmire.CUA.contextPath&&(atmire.CUA.contextPath=a('[name="contextpath"]').val(),void 0===atmire.CUA.contextPath&&(atmire.CUA.contextPath=""+atmire.contextPath)),atmire.CUA.contextPath},d(),atmire.CUA.getTemplate=function(e){return void 0!==DSpace.templates&&void 0!==DSpace.templates[e]||(a.isFunction(b.compile)?c(e):(b=void 0,a.ajax({url:atmire.CUA.getContextPath()+"/aspects/ReportingSuite/handlebars.min.js",async:!1,dataType:"script",success:function(){b=atmire.Handlebars=window.Handlebars,d(),c(e)}}))),b.template(DSpace.templates[e])}}(jQuery,function(){return window.atmire&&window.atmire.Handlebars?window.atmire.Handlebars:Handlebars}()),this.DSpace=this.DSpace||{},this.DSpace.templates=this.DSpace.templates||{},this.DSpace.templates["statlet/notifications/loading"]={compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){return'<div class="col-xs-12 col-md-12 col-lg-12">\n    <div class="alert-statistic-loading"><div class="spinner-wrapper"></div><div class="alert-statistic-label">Loading statistics ...</div></div>\n</div>\n'},useData:!0},this.DSpace.templates["statlet/initial_structure"]={compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){return'<div id="aspect_statistics_StatletTransformer_div_statswrapper" class="">\n    <div class="notifications row"></div>\n    <div class="widgets row"></div>\n</div>'},useData:!0},$(document).ready(function(){combineURL=function(a){if(0==a.length)return"";var b=a.join("/");return b=b.replace(/:\//g,"://"),b=b.replace(/([^:\s])\/+/g,"$1/"),b=b.replace(/\/(\?|&|#[^!])/g,"$1"),b=b.replace(/(\?.+)\?/g,"$1&")},atmire=atmire||{};var a=(atmire.CUA=atmire.CUA||{},atmire.CUA.statlet=atmire.CUA.statlet||{});void 0===a.constants&&(a.constants={}),a.constants.viewports={xs:0,sm:768,md:992,lg:1200},a.spinnerOpts={lines:10,length:0,width:3,radius:5,corners:1,rotate:0,direction:1,color:"#333333",speed:.5,trail:60,shadow:!1,hwaccel:!1,className:"spinner",zIndex:2e9,top:"auto",left:"auto"},a.timeout=3e4}),function(){function a(a){a.html(atmire.CUA.getTemplate("statlet/notifications/loading")()).promise().done(function(){$(".alert-statistic-loading .spinner-wrapper").spin(i.spinnerOpts)})}var b,c,d,e,f,g,h,i,j,k,l;atmire=atmire||{},atmire.CUA=atmire.CUA||{},i=atmire.CUA.statlet=atmire.CUA.statlet||{},j=atmire.CUA.statlet.afterInitCallbacks=atmire.CUA.statlet.afterInitCallbacks||[],k=atmire.CUA.statlet.afterLoadCallbacks=atmire.CUA.statlet.afterLoadCallbacks||[],l=atmire.CUA.statlet.toggleStatletsHook=atmire.CUA.statlet.toggleStatletsHook||[],i.initStatlet=function(k){var m,n;for(h=$("div#aspect_statistics_StatletTransformer_div_showStats .btn"),b=$("#aspect_statistics_StatletTransformer_field_statlet-ms-hide").val(),d=$("#aspect_statistics_StatletTransformer_field_statlet-ajax-handle").val(),c=h.html(),h.bind("click",function(d){d.stopImmediatePropagation(),d.preventDefault();try{matchHeights(1e3)}catch(d){}e=$("div#aspect_statistics_StatletTransformer_div_statswrapper");var h=!e.is(":visible");if(h)if($(this).html(b),0===e.length){var j=atmire.CUA.getTemplate("statlet/initial_structure")();$(j).insertAfter($("div#aspect_statistics_StatletTransformer_div_showStats")).promise().done(function(b){e=b,g=$(".notifications",e),f=$(".widgets",e),a(g),k(i.loadStatlet)})}else e.fadeIn(333);else e.fadeOut(333),$(this).html(c);return"function"==typeof l&&l(h),!1}),$("div#aspect_statistics_StatletTransformer_div_showStats img").bind("click",function(){return $("div#aspect_statistics_StatletTransformer_div_showStats .btn").click(),!1}),m=0;m<j.length;m++)"function"==typeof(n=j[m])&&n()},i.loadStatlet=function(b,c){var h,j,l,m,n;void 0===c&&(c=i.timeout),void 0===b&&(b={},b.handle=d),$.ajax({cache:!1,url:i.restEndpoint,type:"GET",dataType:"json",data:b,timeout:c,success:function a(c){var d,o;for(f.empty(),l=!1,m=!1,n=!1,d=0;d<c.length;d++)j=c[d],i.preProcess(j),j.showStatlet&&(h=i.template[j.type](j),$(h).appendTo(f).promise().done(function(a){i.postRender(j,a,function(){var a=document.querySelector(".widgets");window.msnry=new Masonry(a,{itemSelector:".widget"})})}),void 0!==j.outOfDate&&j.outOfDate&&(l=!0),void 0!==j.userUpdateRequest&&j.userUpdateRequest&&(m=!0)),n=j.hasData||n;for(g.empty(),l?(h=atmire.CUA.getTemplate("statlet/notifications/outdated")(),g.html(h).promise().done(function(){$(".spinner-wrapper",e).spin(i.spinnerOpts),b.forceupdate=!0,i.loadStatlet(b,0)})):m?(h=atmire.CUA.getTemplate("statlet/notifications/updated")(),g.html(h).promise().done(function(){setTimeout(function(){g.slideUp()},1e4)})):n||(h=atmire.CUA.getTemplate("statlet/notifications/no_data")(),g.html(h).promise().done(function(){})),d=0;d<k.length;d++)"function"==typeof(o=k[d])&&o(!0,b,c,a)},error:function(c,d,f){var j,l;if("timeout"===d)g.empty(),h=atmire.CUA.getTemplate("statlet/notifications/error")(),g.html(h).promise().done(function(){$("a.retry",g).bind("click",function(b){b.stopImmediatePropagation(),b.preventDefault(),g.empty(),a(g),i.loadStatlet()})});else{var m=$("<p>"+$("#aspect_statistics_StatletTransformer_field_statlet-ms-ajax-error").val()+"</p>");e.html(m)}for(e.css("height",""),j=0;j<k.length;j++)"function"==typeof(l=k[j])&&l(!1,b)}})}}(),function(){function a(c){void 0===c&&(c=0),c<h.length&&(void 0===h[c]?a(++c):b(c,function(){a(c+1)}))}function b(a,b){var d=h[a],e=[];for(var f in d)d.hasOwnProperty(f)&&e.push(d[f]);c(e,0,b)}function c(a,b,f,h){void 0===h&&(h=[]);for(var i=Math.min(a.length-b,g),j=0,k=0;k<g&&b<a.length;k++){var l=a[b];e(l,function(e){if(h.push({json:e,data:l}),j++,h.length==a.length){for(var g=0;g<h.length;g++)d(h[g].json,h[g].data);void 0!==f&&f()}else j==i&&a.length>b&&c(a,b,f,h)}),b++}}function d(a,b){for(var c=0;c<a.length;c++){var g=a[c],h=$('.embed-cua-widget[data-widget-id="'+g.id+'"][data-dso-id="'+g.variables.id+'"][data-dso-type="'+g.variables.type+'"]');if(h.length){f.preProcess(g);var i=f.template[g.type](g);h.html(i).promise().done(function(a){f.postRender(g,a,function(){})}),void 0!==g.outOfDate&&g.outOfDate&&b&&(b.forceupdate=!0,e(b,d))}}}function e(a,b){$.ajax({cache:!1,url:f.restEndpoint,type:"GET",dataType:"json",data:a,timeout:f.timeout,success:function(a){b(a)},error:function(a,b,c){}})}atmire=atmire||{};var f=(atmire.CUA=atmire.CUA||{},atmire.CUA.statlet=atmire.CUA.statlet||{}),g=3,h=[];f.initEmbeddedWidgets=function(b){var c=!1;$(".embed-cua-widget").each(function(a){var b=$(this).data("dso-type"),d=$(this).data("dso-id"),e=parseInt($(this).data("priority"))||10,f=h[e];f||(f=h[e]={});var g=f[b+":"+d];g||(g=f[b+":"+d]={dsotype:b,dsoid:d,ids:[]}),g.ids.push($(this).data("widget-id")),c=!0}),c&&b(a)}}(),function(){function a(a){d?b(a()):$.when($.getScript(e.getContextPath()+"/cua/config.js"),$.Deferred(function(a){$(a.resolve)})).done(function(){d=!0,f.restEndpoint=combineURL([window.atmire.rest.host,window.atmire.rest.namespace,"statlets"]),b(a)})}function b(a){h?a():$.when(c(),$.cachedScript(e.getContextPath()+"/aspects/ReportingSuite/scripts/statlet_addons.js"),$.Deferred(function(a){$(a.resolve)})).done(function(){h=!0;var b,c;for(c=0;c<g.length;c++)"function"==typeof(b=g[c])&&b();a()})}function c(){numeral.language()!=window.atmire.locale&&$.getScript(e.getContextPath()+"/cua/language/"+window.atmire.locale)}atmire=atmire||{};var d,e=atmire.CUA=atmire.CUA||{},f=atmire.CUA.statlet=atmire.CUA.statlet||{},g=atmire.CUA.statlet.afterLoadAdditionsCallbacks=atmire.CUA.statlet.afterLoadAdditionsCallbacks||[],h=!1;$(document).ready(function(){$.getJSON(e.getContextPath()+"/JSON/cua/i18n",void 0,function(b){var c={};$.extend(c,$(document).data("i18n"),b),$(document).data("i18n",c),f.initStatlet(a),f.initEmbeddedWidgets(a)})}),jQuery.cachedScript=function(a,b){return b=$.extend(b||{},{dataType:"script",cache:!0,url:a}),jQuery.ajax(b)},Modernizr.addTest("firefox",function(){return!!navigator.userAgent.match(/firefox/i)})}();